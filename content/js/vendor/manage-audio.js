let recorder,audio_stream;const recordButton=document.getElementById("recordButton");recordButton.addEventListener("click",startRecording);const stopButton=document.getElementById("stopButton");stopButton.addEventListener("click",stopRecording),stopButton.disabled=!0;const preview=document.getElementById("audio-playback"),downloadAudio=document.getElementById("downloadButton");function startRecording(){recordButton.disabled=!0,recordButton.innerText="Recording...",$("#recordButton").addClass("button-animate"),$("#stopButton").removeClass("inactive"),stopButton.disabled=!1,$("#audio-playback").hasClass("hidden")||$("#audio-playback").addClass("hidden"),$("#downloadContainer").hasClass("hidden")||$("#downloadContainer").addClass("hidden"),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(o){audio_stream=o,recorder=new MediaRecorder(o),recorder.ondataavailable=function(o){o=URL.createObjectURL(o.data);preview.src=o,downloadAudio.href=o},recorder.start(),timeout_status=setTimeout(function(){console.log("5 min timeout"),stopRecording()},3e5)})}function stopRecording(){recorder.stop(),audio_stream.getAudioTracks()[0].stop(),recordButton.disabled=!1,recordButton.innerText="Redo Recording",$("#recordButton").removeClass("button-animate"),$("#stopButton").addClass("inactive"),stopButton.disabled=!0,$("#audio-playback").removeClass("hidden"),$("#downloadContainer").removeClass("hidden")}function downloadRecording(){var o=(new Date).toISOString().slice(0,10);downloadAudio.download=o+".wav"}downloadAudio.addEventListener("click",downloadRecording);